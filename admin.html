<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Quản Trị | 2HandShop </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/auth.js"></script>
    <script src="js/script.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">2HandShop</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Trang chủ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="products.html">Sản phẩm</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tichdiem.html">Tích điểm</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="blog.html">Blog</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Liên hệ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="admin.html">Admin</a>
                    </li>
                </ul>
                <ul class="navbar-nav" id="auth-nav">
                    <!-- Đăng nhập/Đăng ký sẽ được thêm bằng JavaScript -->
                </ul>
            </div>
        </div>
    </nav>

    <!-- Admin Dashboard -->
    <section class="py-5">
        <div class="container">
            <h2 class="mb-4">Bảng điều khiển quản trị</h2>
            
            <ul class="nav nav-tabs mb-4" id="adminTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">Tổng quan</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab">Sản phẩm</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="orders-tab" data-bs-toggle="tab" data-bs-target="#orders" type="button" role="tab">Đơn hàng</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" data-bs-target="#shipping" type="button" role="tab">Vận chuyển</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab">Người dùng</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="funds-tab" data-bs-toggle="tab" data-bs-target="#funds" type="button" role="tab">Sổ quỹ</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab">Báo cáo</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="promotions-tab" data-bs-toggle="tab" data-bs-target="#promotions" type="button" role="tab">Khuyến mại</button>
                </li>
            </ul>
            
            <div class="tab-content" id="adminTabsContent">
                <div class="tab-pane fade show active" id="overview" role="tabpanel">
                    <div class="row">
                        <div class="col-md-3 mb-4">
                            <div class="card bg-primary text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Tổng sản phẩm</h5>
                                    <h2 id="total-products">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Tổng người dùng</h5>
                                    <h2 id="total-users">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-info text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Đơn hàng hôm nay</h5>
                                    <h2 id="today-orders">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-warning text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Doanh thu tháng</h5>
                                    <h2 id="monthly-revenue">0 đ</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="mb-0">Thống kê đơn hàng</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="ordersChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="mb-0">Sản phẩm bán chạy</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="topProductsChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane fade" id="products" role="tabpanel">
                    <div class="d-flex justify-content-between mb-4">
                        <h4>Quản lý sản phẩm</h4>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProductModal">
                            <i class="fas fa-plus me-2"></i> Thêm sản phẩm
                        </button>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-striped" id="products-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Hình ảnh</th>
                                    <th>Tên sản phẩm</th>
                                    <th>Giá</th>
                                    <th>Danh mục</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="tab-pane fade" id="orders" role="tabpanel">
                    <div class="d-flex justify-content-between mb-4">
                        <h4>Quản lý đơn hàng</h4>
                        <div class="d-flex">
                            <div class="input-group me-3" style="width: 300px;">
                                <input type="text" class="form-control" id="order-search" placeholder="Tìm kiếm đơn hàng...">
                                <button class="btn btn-outline-secondary" type="button" id="order-search-btn">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                            <select class="form-select" id="order-status-filter" style="width: 200px;">
                                <option value="all">Tất cả trạng thái</option>
                                <option value="pending">Chờ xử lý</option>
                                <option value="processing">Đang xử lý</option>
                                <option value="shipped">Đã giao hàng</option>
                                <option value="completed">Hoàn thành</option>
                                <option value="cancelled">Đã hủy</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-striped" id="orders-table">
                            <thead>
                                <tr>
                                    <th>Mã đơn</th>
                                    <th>Ngày đặt</th>
                                    <th>Khách hàng</th>
                                    <th>Sản phẩm</th>
                                    <th>Tổng tiền</th>
                                    <th>Thanh toán</th>
                                    <th>Trạng thái</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                    
                    <nav aria-label="Page navigation" class="mt-4">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">Trước</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">Tiếp</a>
                            </li>
                        </ul>
                    </nav>
                </div>
                
                <div class="tab-pane fade" id="shipping" role="tabpanel">
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card bg-primary text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Tổng số đơn</h5>
                                    <h2 id="total-orders">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-warning text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Chờ giao</h5>
                                    <h2 id="pending-orders">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Đã giao</h5>
                                    <h2 id="delivered-orders">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-danger text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Đã hủy</h5>
                                    <h2 id="cancelled-orders">0</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Danh sách đơn hàng cần vận chuyển</h5>
                            <div class="input-group" style="width: 300px;">
                                <input type="text" class="form-control" placeholder="Tìm kiếm đơn hàng...">
                                <button class="btn btn-outline-secondary" type="button">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <table class="table table-striped" id="shipping-table">
                                <thead>
                                    <tr>
                                        <th>Mã đơn</th>
                                        <th>Khách hàng</th>
                                        <th>Địa chỉ</th>
                                        <th>SĐT</th>
                                        <th>Phí VC</th>
                                        <th>Trạng thái</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Quản lý đối soát vận chuyển</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Mã vận đơn</th>
                                            <th>Đơn hàng</th>
                                            <th>Đơn vị VC</th>
                                            <th>Ngày giao</th>
                                            <th>Phí VC</th>
                                            <th>COD</th>
                                            <th>Trạng thái</th>
                                            <th>Hành động</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>VC001</td>
                                            <td>DH001, DH002</td>
                                            <td>GHTK</td>
                                            <td>15/05/2025</td>
                                            <td>40,000 đ</td>
                                            <td>1,200,000 đ</td>
                                            <td><span class="badge bg-success">Đã đối soát</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-primary">Chi tiết</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>VC002</td>
                                            <td>DH003</td>
                                            <td>Viettel Post</td>
                                            <td>16/05/2025</td>
                                            <td>35,000 đ</td>
                                            <td>650,000 đ</td>
                                            <td><span class="badge bg-warning">Chờ đối soát</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-primary">Đối soát</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Users Tab -->
                <div class="tab-pane fade" id="users" role="tabpanel">
                    <h4 class="mb-4">Quản lý người dùng</h4>
                    
                    <div class="table-responsive">
                        <table class="table table-striped" id="users-table">
                            <thead>
                                <tr>
                                    <th>Tên đăng nhập</th>
                                    <th>Họ tên</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="tab-pane fade" id="funds" role="tabpanel">
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Tổng thu</h5>
                                    <h2 id="total-income">0 đ</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-danger text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Tổng chi</h5>
                                    <h2 id="total-expense">0 đ</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-info text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Quỹ đầu kỳ</h5>
                                    <h2 id="initial-fund">0 đ</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-primary text-white">
                                <div class="card-body">
                                    <h5 class="card-title">Quỹ hiện tại</h5>
                                    <h2 id="current-fund">0 đ</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Lịch sử giao dịch</h5>
                            <div>
                                <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#addTransactionModal">
                                    <i class="fas fa-plus me-2"></i> Thêm giao dịch
                                </button>
                                <button class="btn btn-outline-primary">
                                    <i class="fas fa-download me-2"></i> Xuất Excel
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <label for="transaction-type-filter" class="form-label">Loại giao dịch</label>
                                    <select class="form-select" id="transaction-type-filter">
                                        <option value="all">Tất cả</option>
                                        <option value="income">Thu</option>
                                        <option value="expense">Chi</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label for="transaction-date-from" class="form-label">Từ ngày</label>
                                    <input type="date" class="form-control" id="transaction-date-from">
                                </div>
                                <div class="col-md-3">
                                    <label for="transaction-date-to" class="form-label">Đến ngày</label>
                                    <input type="date" class="form-control" id="transaction-date-to">
                                </div>
                                <div class="col-md-3 d-flex align-items-end">
                                    <button class="btn btn-primary w-100">
                                        <i class="fas fa-filter me-2"></i> Lọc
                                    </button>
                                </div>
                            </div>
                            
                            <table class="table table-striped" id="funds-table">
                                <thead>
                                    <tr>
                                        <th>Ngày</th>
                                        <th>Mã GD</th>
                                        <th>Loại</th>
                                        <th>Số tiền</th>
                                        <th>Người thực hiện</th>
                                        <th>Ghi chú</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane fade" id="reports" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="mb-0">Doanh thu theo tháng</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="revenueChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="mb-0">Top sản phẩm bán chạy</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped" id="topProductsTable">
                                            <thead>
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Tên sản phẩm</th>
                                                    <th>Số lượng bán</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="mb-0">Tỉ lệ chuyển đổi</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="conversionChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h5 class="mb-0">Chi tiêu theo thời gian</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="expensesChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Báo cáo chi tiết</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <label for="report-type" class="form-label">Loại báo cáo</label>
                                    <select class="form-select" id="report-type">
                                        <option value="daily">Hàng ngày</option>
                                        <option value="weekly">Hàng tuần</option>
                                        <option value="monthly">Hàng tháng</option>
                                        <option value="quarterly">Hàng quý</option>
                                        <option value="yearly">Hàng năm</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label for="report-start-date" class="form-label">Từ ngày</label>
                                    <input type="date" class="form-control" id="report-start-date">
                                </div>
                                <div class="col-md-3">
                                    <label for="report-end-date" class="form-label">Đến ngày</label>
                                    <input type="date" class="form-control" id="report-end-date">
                                </div>
                                <div class="col-md-3 d-flex align-items-end">
                                    <button class="btn btn-primary w-100" id="generate-report-btn">
                                        <i class="fas fa-filter me-2"></i> Lọc
                                    </button>
                                </div>
                            </div>
                            
                            <div class="d-flex justify-content-between mb-3">
                                <div>
                                    <button class="btn btn-outline-primary me-2">
                                        <i class="fas fa-file-pdf me-2"></i> Xuất PDF
                                    </button>
                                    <button class="btn btn-outline-success">
                                        <i class="fas fa-file-excel me-2"></i> Xuất Excel
                                    </button>
                                </div>
                                <div>
                                    <button class="btn btn-outline-secondary">
                                        <i class="fas fa-print me-2"></i> In báo cáo
                                    </button>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-striped" id="detailed-report-table">
                                    <thead>
                                        <tr>
                                            <th>Thời gian</th>
                                            <th>Doanh thu</th>
                                            <th>Số đơn</th>
                                            <th>Giá trị TB</th>
                                            <th>Số SP</th>
                                            <th>Tỉ lệ hủy</th>
                                            <th>Chi phí</th>
                                            <th>Lợi nhuận</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane fade" id="promotions" role="tabpanel">
                    <div class="d-flex justify-content-between mb-4">
                        <h4>Quản lý khuyến mại</h4>
                        <div>
                            <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#addPromotionModal">
                                <i class="fas fa-plus me-2"></i> Thêm khuyến mại
                            </button>
                            <button class="btn btn-outline-primary">
                                <i class="fas fa-sync-alt me-2"></i> Làm mới
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-striped" id="promotions-table">
                            <thead>
                                <tr>
                                    <th>Mã KM</th>
                                    <th>Tên chương trình</th>
                                    <th>Loại giảm giá</th>
                                    <th>Giá trị</th>
                                    <th>Ngày bắt đầu</th>
                                    <th>Ngày kết thúc</th>
                                    <th>Số lượt dùng</th>
                                    <th>Trạng thái</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="modal fade" id="addProductModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Thêm sản phẩm mới</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addProductForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="productName" class="form-label">Tên sản phẩm</label>
                                <input type="text" class="form-control" id="productName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="productPrice" class="form-label">Giá</label>
                                <input type="number" class="form-control" id="productPrice" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="productCategory" class="form-label">Danh mục</label>
                                <select class="form-select" id="productCategory" required>
                                    <option value="men">Thời trang nam</option>
                                    <option value="women">Thời trang nữ</option>
                                    <option value="accessories">Phụ kiện</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="productImage" class="form-label">Hình ảnh</label>
                                <input type="file" class="form-control" id="productImage" accept="image/*">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="productDescription" class="form-label">Mô tả ngắn</label>
                            <textarea class="form-control" id="productDescription" rows="2" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="productDetails" class="form-label">Chi tiết sản phẩm</label>
                            <textarea class="form-control" id="productDetails" rows="4" required></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-primary" id="saveProductBtn">Lưu sản phẩm</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="editProductModal" tabindex="-1" aria-hidden="true">
    </div>

    <div class="modal fade" id="orderDetailsModal" tabindex="-1" aria-hidden="true">
    </div>

    <div class="modal fade" id="addTransactionModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Thêm giao dịch</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addTransactionForm">
                        <div class="mb-3">
                            <label for="transaction-type" class="form-label">Loại giao dịch</label>
                            <select class="form-select" id="transaction-type" required>
                                <option value="income">Thu</option>
                                <option value="expense">Chi</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="transaction-amount" class="form-label">Số tiền</label>
                            <input type="number" class="form-control" id="transaction-amount" required>
                        </div>
                        <div class="mb-3">
                            <label for="transaction-note" class="form-label">Ghi chú</label>
                            <textarea class="form-control" id="transaction-note" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-primary" id="save-transaction-btn">Lưu giao dịch</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addPromotionModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Thêm khuyến mại</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addPromotionForm">
                        <div class="mb-3">
                            <label for="promotion-code" class="form-label">Mã khuyến mại</label>
                            <input type="text" class="form-control" id="promotion-code" required>
                        </div>
                        <div class="mb-3">
                            <label for="promotion-name" class="form-label">Tên chương trình</label>
                            <input type="text" class="form-control" id="promotion-name" required>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="promotion-type" class="form-label">Loại giảm giá</label>
                                <select class="form-select" id="promotion-type" required>
                                    <option value="fixed">Giảm giá cố định</option>
                                    <option value="percent">Giảm giá phần trăm</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="promotion-value" class="form-label">Giá trị</label>
                                <input type="number" class="form-control" id="promotion-value" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="promotion-start-date" class="form-label">Ngày bắt đầu</label>
                                <input type="date" class="form-control" id="promotion-start-date" required>
                            </div>
                            <div class="col-md-6">
                                <label for="promotion-end-date" class="form-label">Ngày kết thúc</label>
                                <input type="date" class="form-control" id="promotion-end-date" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="promotion-description" class="form-label">Mô tả</label>
                            <textarea class="form-control" id="promotion-description" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="promotion-usage-limit" class="form-label">Giới hạn sử dụng (0 = không giới hạn)</label>
                            <input type="number" class="form-control" id="promotion-usage-limit" value="0" min="0">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-primary" id="save-promotion-btn">Lưu khuyến mại</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="editPromotionModal" tabindex="-1" aria-hidden="true">
    </div>

    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-3 mb-3">
                    <h5>Về chúng tôi</h5>
                    <p> 2HandShop Fashion - Nơi mua sắm sản phẩm đã qua sử dụng chất lượng và giá cả phải chăng.</p>
                    <p><i class="fas fa-map-marker-alt"></i> 279 Nguyễn Tri Phương, Phường 5, Quận 10, TP. Hồ Chí Minh</p>
                    <p><i class="fas fa-phone-alt"></i> 0187.457.789</p>
                    <p><i class="fas fa-envelope"></i> 2handshop@gmail.com</p>
                </div>
                <div class="col-md-3 mb-3">
                    <h5>Liên kết nhanh</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-th-list"></i> <a href="products.html" class="text-white">Sản phẩm</a></li>
                        <li><i class="fas fa-users"></i> <a href="blog.html" class="text-white">Blog</a></li>
                        <li><i class="fas fa-phone-alt"></i> <a href="contact.html" class="text-white">Liên hệ</a></li>
                        <li><i class="fas fa-shopping-cart"></i> <a href="cart.html" class="text-white">Giỏ hàng</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-3">
                    <h5>Các phương thức vận chuyển</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-shipping-fast"></i> Giao hàng nhanh</li>
                        <li><i class="fas fa-box-open"></i> Giao hàng tiết kiệm</li>
                    </ul>
                    <h5>Các phương thức thanh toán</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-wallet"></i> Momo</li>
                        <li><i class="fas fa-university"></i> Thẻ tín dụng</li>
                        <li><i class="fas fa-money-bill-wave"></i> Thanh toán khi nhận hàng</li>
                    </ul>
                </div>
                <div class="col-md-3 mb-3">
                    <h5>Kết nối</h5>
                    <a href="#" class="text-white me-2"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-white me-2"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-white me-2"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p class="mb-0">&copy; 2025 2HandShop Fashion. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        const orders = [
            {
                id: 'DH001',
                date: '2025-05-15',
                customer: 'Nguyễn Văn A',
                email: 'nguyenvana@gmail.com',
                phone: '0912345678',
                products: [
                    { id: 1, name: 'Áo khoác denim nam', quantity: 1, price: 250000 },
                    { id: 3, name: 'Quần jeans nam', quantity: 2, price: 200000 }
                ],
                total: 650000,
                payment: 'COD',
                status: 'delivered',
                shipping: {
                    address: '123 Đường ABC, Quận 1, TP.HCM',
                    fee: 20000,
                    status: 'delivered',
                    carrier: 'GHTK',
                    trackingNumber: 'VC001'
                }
            },
            {
                id: 'DH002',
                date: '2025-05-16',
                customer: 'Trần Thị B',
                email: 'tranthib@gmail.com',
                phone: '0987654321',
                products: [
                    { id: 2, name: 'Váy hoa nữ', quantity: 1, price: 180000 },
                    { id: 5, name: 'Túi xách da', quantity: 1, price: 350000 }
                ],
                total: 530000,
                payment: 'Momo',
                status: 'processing',
                shipping: {
                    address: '456 Đường XYZ, Quận 3, TP.HCM',
                    fee: 20000,
                    status: 'shipping',
                    carrier: 'Viettel Post',
                    trackingNumber: 'VC002'
                }
            },
            {
                id: 'DH003',
                date: '2025-05-17',
                customer: 'Lê Văn C',
                email: 'levanc@gmail.com',
                phone: '0909123456',
                products: [
                    { id: 4, name: 'Áo thun nữ', quantity: 3, price: 120000 },
                    { id: 6, name: 'Giày sneaker nam', quantity: 1, price: 400000 }
                ],
                total: 760000,
                payment: 'COD',
                status: 'pending',
                shipping: {
                    address: '789 Đường DEF, Quận 5, TP.HCM',
                    fee: 20000,
                    status: 'pending',
                    carrier: 'GHTK',
                    trackingNumber: 'VC003'
                }
            }
        ];

        const transactions = [
            {
                id: 'GD001',
                date: '2025-05-01',
                type: 'income',
                amount: 10000000,
                user: 'Admin',
                note: 'Thu từ đơn hàng DH001'
            },
            {
                id: 'GD002',
                date: '2025-05-05',
                type: 'expense',
                amount: 5000000,
                user: 'Admin',
                note: 'Chi mua hàng nhập kho'
            },
            {
                id: 'GD003',
                date: '2025-05-10',
                type: 'income',
                amount: 7500000,
                user: 'Admin',
                note: 'Thu từ đơn hàng DH002'
            }
        ];

        const promotions = [
            {
                code: 'FREESHIP',
                name: 'Miễn phí vận chuyển',
                type: 'fixed',
                value: 20000,
                startDate: '2024-05-01',
                endDate: '2026-05-31',
                usageLimit: 0,
                usedCount: 15,
                status: 'active'
            },
            {
                code: 'SALE10',
                name: 'Giảm 10%',
                type: 'percent',
                value: 10,
                startDate: '2025-05-15',
                endDate: '2025-05-30',
                usageLimit: 50,
                usedCount: 32,
                status: 'active'
            },
            {
                code: 'SUMMER20',
                name: 'Giảm 20% mùa hè',
                type: 'percent',
                value: 20,
                startDate: '2025-06-01',
                endDate: '2025-08-31',
                usageLimit: 100,
                usedCount: 0,
                status: 'upcoming'
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = getCurrentUser();
            
            if (!currentUser || currentUser.role !== 'admin') {
                alert('Bạn không có quyền truy cập trang này!');
                window.location.href = 'index.html';
                return;
            }
            const tabEls = document.querySelectorAll('button[data-bs-toggle="tab"]');
            tabEls.forEach(tabEl => {
                tabEl.addEventListener('shown.bs.tab', function(event) {
                    const target = event.target.getAttribute('data-bs-target');
                    if (target === '#reports') {
                        loadReportsData();
                    }
                });
            });

    loadAdminData();
});
            
            updateAuthStatus();
            updateCartCount();
            loadAdminData();
            
            const adminTabs = document.querySelectorAll('#adminTabs .nav-link');
            adminTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-bs-target').substring(1);
                    loadTabContent(tabId);
                });
            });
            
            
            loadTabContent('overview');
            
            document.getElementById('saveProductBtn')?.addEventListener('click', addProduct);
            document.getElementById('save-transaction-btn')?.addEventListener('click', addTransaction);
            document.getElementById('save-promotion-btn')?.addEventListener('click', addPromotion);
        ;
        
        function loadAdminData() {
            document.getElementById('total-products').textContent = products.length;
            document.getElementById('total-users').textContent = getUsers().length;
            document.getElementById('today-orders').textContent = orders.filter(o => o.date === new Date().toISOString().split('T')[0]).length;
            
            const currentMonth = new Date().getMonth() + 1;
            const monthlyRevenue = orders
                .filter(o => new Date(o.date).getMonth() + 1 === currentMonth)
                .reduce((sum, o) => sum + o.total, 0);
            document.getElementById('monthly-revenue').textContent = formatPrice(monthlyRevenue) + ' đ';
            
            drawOrdersChart();
            drawTopProductsChart();
        }
        
        function loadTabContent(tabId) {
            switch(tabId) {
                case 'products':
                    loadProductsTable();
                    break;
                case 'orders':
                    loadOrdersTable();
                    break;
                case 'shipping':
                    loadShippingData();
                    break;
                case 'users':
                    loadUsersTable();
                    break;
                case 'funds':
                    loadFundsData();
                    break;
                case 'reports':
                    loadReportsData();
                    break;
                case 'promotions':
                    loadPromotionsData();
                    break;
                case 'overview':
                    break;
            }
        }
        
        function loadProductsTable() {
            const tableBody = document.querySelector('#products-table tbody');
            let html = '';
            
            products.forEach(product => {
                html += `
                    <tr>
                        <td>${product.id}</td>
                        <td><img src="${product.image}" width="50" height="50" class="img-thumbnail"></td>
                        <td>${product.name}</td>
                        <td>${formatPrice(product.price)} đ</td>
                        <td>${getCategoryName(product.category)}</td>
                        <td>
                            <button class="btn btn-sm btn-primary me-2 edit-product" data-id="${product.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger delete-product" data-id="${product.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            document.querySelectorAll('.edit-product').forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    editProduct(productId);
                });
            });
            
            document.querySelectorAll('.delete-product').forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    if (confirm('Bạn có chắc chắn muốn xóa sản phẩm này?')) {
                        deleteProduct(productId);
                    }
                });
            });
        }
        
        function loadOrdersTable() {
            const tableBody = document.querySelector('#orders-table tbody');
            let html = '';
            
            orders.forEach(order => {
                const productsHtml = order.products.map(p => 
                    `${p.name} (x${p.quantity})`).join('<br>');
                
                let statusBadge;
                switch(order.status) {
                    case 'pending':
                        statusBadge = '<span class="badge bg-warning">Chờ xử lý</span>';
                        break;
                    case 'processing':
                        statusBadge = '<span class="badge bg-info">Đang xử lý</span>';
                        break;
                    case 'shipped':
                        statusBadge = '<span class="badge bg-primary">Đã giao hàng</span>';
                        break;
                    case 'completed':
                        statusBadge = '<span class="badge bg-success">Hoàn thành</span>';
                        break;
                    case 'cancelled':
                        statusBadge = '<span class="badge bg-danger">Đã hủy</span>';
                        break;
                    default:
                        statusBadge = '<span class="badge bg-secondary">Khác</span>';
                }
                
                html += `
                    <tr>
                        <td>${order.id}</td>
                        <td>${order.date}</td>
                        <td>${order.customer}</td>
                        <td>${productsHtml}</td>
                        <td>${formatPrice(order.total)} đ</td>
                        <td>${order.payment}</td>
                        <td>${statusBadge}</td>
                        <td>
                            <button class="btn btn-sm btn-primary me-2 view-order" data-id="${order.id}">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-danger cancel-order" data-id="${order.id}">
                                <i class="fas fa-times"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            document.querySelectorAll('.view-order').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = this.getAttribute('data-id');
                    viewOrderDetails(orderId);
                });
            });
            
            document.querySelectorAll('.cancel-order').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = this.getAttribute('data-id');
                    if (confirm('Bạn có chắc chắn muốn hủy đơn hàng này?')) {
                        cancelOrder(orderId);
                    }
                });
            });
        }
        
        function loadShippingData() {
            const pendingOrders = orders.filter(o => o.shipping.status === 'pending').length;
            const deliveredOrders = orders.filter(o => o.shipping.status === 'delivered').length;
            const cancelledOrders = orders.filter(o => o.status === 'cancelled').length;
            
            document.getElementById('total-orders').textContent = orders.length;
            document.getElementById('pending-orders').textContent = pendingOrders;
            document.getElementById('delivered-orders').textContent = deliveredOrders;
            document.getElementById('cancelled-orders').textContent = cancelledOrders;
            
            const tableBody = document.querySelector('#shipping-table tbody');
            let html = '';
            
            orders.forEach(order => {
                let shippingStatus;
                switch(order.shipping.status) {
                    case 'pending':
                        shippingStatus = '<span class="badge bg-warning">Chờ giao</span>';
                        break;
                    case 'shipping':
                        shippingStatus = '<span class="badge bg-info">Đang giao</span>';
                        break;
                    case 'delivered':
                        shippingStatus = '<span class="badge bg-success">Đã giao</span>';
                        break;
                    case 'returned':
                        shippingStatus = '<span class="badge bg-danger">Hoàn hàng</span>';
                        break;
                    default:
                        shippingStatus = '<span class="badge bg-secondary">Khác</span>';
                }
                
                html += `
                    <tr>
                        <td>${order.id}</td>
                        <td>${order.customer}</td>
                        <td>${order.shipping.address}</td>
                        <td>${order.phone}</td>
                        <td>${formatPrice(order.shipping.fee)} đ</td>
                        <td>${shippingStatus}</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    Thao tác
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" data-id="${order.id}" data-action="process">Xử lý đơn</a></li>
                                    <li><a class="dropdown-item" href="#" data-id="${order.id}" data-action="ship">Giao hàng</a></li>
                                    <li><a class="dropdown-item" href="#" data-id="${order.id}" data-action="complete">Hoàn thành</a></li>
                                    <li><a class="dropdown-item" href="#" data-id="${order.id}" data-action="return">Hoàn hàng</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            document.querySelectorAll('.dropdown-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const orderId = this.getAttribute('data-id');
                    const action = this.getAttribute('data-action');
                    updateShippingStatus(orderId, action);
                });
            });
        }
        
        function loadUsersTable() {
            const tableBody = document.querySelector('#users-table tbody');
            const users = getUsers();
            let html = '';
            
            users.forEach(user => {
                html += `
                    <tr>
                        <td>${user.username}</td>
                        <td>${user.name}</td>
                        <td>
                            <span class="badge ${user.active ? 'bg-success' : 'bg-secondary'}">
                                ${user.active ? 'Hoạt động' : 'Không hoạt động'}
                            </span>
                        </td>
                        <td>
                            <button class="btn btn-sm ${user.active ? 'btn-warning' : 'btn-success'} me-2 toggle-user" 
                                data-username="${user.username}" data-active="${user.active}">
                                <i class="fas ${user.active ? 'fa-user-slash' : 'fa-user-check'}"></i>
                                ${user.active ? 'Vô hiệu hóa' : 'Kích hoạt'}
                            </button>
                            <button class="btn btn-sm btn-danger delete-user" data-username="${user.username}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            document.querySelectorAll('.toggle-user').forEach(btn => {
                btn.addEventListener('click', function() {
                    const username = this.getAttribute('data-username');
                    const active = this.getAttribute('data-active') === 'true';
                    updateUserStatus(username, !active);
                    loadUsersTable();
                });
            });
            
            document.querySelectorAll('.delete-user').forEach(btn => {
                btn.addEventListener('click', function() {
                    const username = this.getAttribute('data-username');
                    if (confirm(`Bạn có chắc chắn muốn xóa người dùng ${username}?`)) {
                        deleteUser(username);
                        loadUsersTable();
                    }
                });
            });
        }
        
        function loadFundsData() {
            const totalIncome = transactions.filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            const totalExpense = transactions.filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            const initialFund = 25000000; 
            const currentFund = initialFund + totalIncome - totalExpense;
            
            document.getElementById('total-income').textContent = formatPrice(totalIncome) + ' đ';
            document.getElementById('total-expense').textContent = formatPrice(totalExpense) + ' đ';
            document.getElementById('initial-fund').textContent = formatPrice(initialFund) + ' đ';
            document.getElementById('current-fund').textContent = formatPrice(currentFund) + ' đ';
            
           
            const tableBody = document.querySelector('#funds-table tbody');
            let html = '';
            
            transactions.forEach(transaction => {
                html += `
                    <tr>
                        <td>${transaction.date}</td>
                        <td>${transaction.id}</td>
                        <td>
                            <span class="badge ${transaction.type === 'income' ? 'bg-success' : 'bg-danger'}">
                                ${transaction.type === 'income' ? 'Thu' : 'Chi'}
                            </span>
                        </td>
                        <td>${formatPrice(transaction.amount)} đ</td>
                        <td>${transaction.user}</td>
                        <td>${transaction.note || ''}</td>
                        <td>
                            <button class="btn btn-sm btn-danger delete-transaction" data-id="${transaction.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            document.querySelectorAll('.delete-transaction').forEach(btn => {
                btn.addEventListener('click', function() {
                    const transactionId = this.getAttribute('data-id');
                    if (confirm('Bạn có chắc chắn muốn xóa giao dịch này?')) {
                        deleteTransaction(transactionId);
                    }
                });
            });
        }
        function loadTopProductsTable() {
            const topProducts = [
                { name: 'Áo khoác denim nam', sold: 120 },
                { name: 'Váy hoa nữ cổ điển', sold: 95 },
                { name: 'Quần jeans nam rách gối', sold: 85 },
                { name: 'Áo thun nam cổ tròn', sold: 78 },
                { name: 'Túi xách da bò', sold: 65 }
            ];

        const tbody = document.querySelector('#topProductsTable tbody');
        tbody.innerHTML = '';

        topProducts.forEach((product, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${index + 1}</td>
            <td>${product.name}</td>
            <td>${product.sold}</td>
        `;
        tbody.appendChild(row);
        });
    }
        function loadReportsData() {
            loadTopProductsTable();
            drawRevenueChart();
            drawTopProductsChart();
            drawConversionChart();
            drawExpensesChart();
            drawRevenueChart();
            
            const tableBody = document.querySelector('#detailed-report-table tbody');
            const reportData = [
                { period: '01/03/2025 - 05/03/2025', revenue: 12000000, orders: 15, avgValue: 800000, products: 25, cancelRate: '5%', cost: 5000000, profit: 7000000 },
                { period: '08/03/2025 - 14/03/2025', revenue: 15000000, orders: 18, avgValue: 833333, products: 30, cancelRate: '3%', cost: 6000000, profit: 9000000 },
                { period: '15/03/2025 - 21/03/2025', revenue: 18000000, orders: 22, avgValue: 818181, products: 35, cancelRate: '7%', cost: 7000000, profit: 11000000 }
            ];
            
            let html = '';
            reportData.forEach(item => {
                html += `
                    <tr>
                        <td>${item.period}</td>
                        <td>${formatPrice(item.revenue)} đ</td>
                        <td>${item.orders}</td>
                        <td>${formatPrice(item.avgValue)} đ</td>
                        <td>${item.products}</td>
                        <td>${item.cancelRate}</td>
                        <td>${formatPrice(item.cost)} đ</td>
                        <td>${formatPrice(item.profit)} đ</td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
        }
        
        function loadPromotionsData() {
            const tableBody = document.querySelector('#promotions-table tbody');
            let html = '';
            
            promotions.forEach(promo => {
                let statusBadge;
                const today = new Date();
                const startDate = new Date(promo.startDate);
                const endDate = new Date(promo.endDate);
                
                if (today < startDate) {
                    statusBadge = '<span class="badge bg-info">Sắp diễn ra</span>';
                } else if (today > endDate) {
                    statusBadge = '<span class="badge bg-secondary">Hết hạn</span>';
                } else {
                    statusBadge = '<span class="badge bg-success">Đang áp dụng</span>';
                }
                
                const usageText = promo.usageLimit === 0 ? 
                    `${promo.usedCount} lượt` : 
                    `${promo.usedCount}/${promo.usageLimit} lượt`;
                
                html += `
                    <tr>
                        <td>${promo.code}</td>
                        <td>${promo.name}</td>
                        <td>${promo.type === 'fixed' ? 'Giảm cố định' : 'Giảm %'}</td>
                        <td>${promo.type === 'fixed' ? formatPrice(promo.value) + ' đ' : promo.value + '%'}</td>
                        <td>${promo.startDate}</td>
                        <td>${promo.endDate}</td>
                        <td>${usageText}</td>
                        <td>${statusBadge}</td>
                        <td>
                            <button class="btn btn-sm btn-primary me-2 edit-promotion" data-code="${promo.code}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger delete-promotion" data-code="${promo.code}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
            
            document.querySelectorAll('.edit-promotion').forEach(btn => {
                btn.addEventListener('click', function() {
                    const promoCode = this.getAttribute('data-code');
                    editPromotion(promoCode);
                });
            });
            
            document.querySelectorAll('.delete-promotion').forEach(btn => {
                btn.addEventListener('click', function() {
                    const promoCode = this.getAttribute('data-code');
                    if (confirm('Bạn có chắc chắn muốn xóa khuyến mại này?')) {
                        deletePromotion(promoCode);
                    }
                });
            });
            if (document.getElementById('topProductsChart')) {
        drawTopProductsChart();
    }
    if (document.getElementById('conversionChart')) {
        drawConversionChart();
    }
    if (document.getElementById('expensesChart')) {
        drawExpensesChart();
    }
    if (document.getElementById('revenueChart')) {
        drawRevenueChart();
    }
        }
        
        function addProduct() {
            const name = document.getElementById('productName').value.trim();
            const price = parseInt(document.getElementById('productPrice').value, 10);
            const category = document.getElementById('productCategory').value;
            const description = document.getElementById('productDescription').value.trim();
            const details = document.getElementById('productDetails').value.trim();
            const imageInput = document.getElementById('productImage');
            let image = 'images/default-product.png';

            if (imageInput.files && imageInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    image = e.target.result;
                    saveProduct();
                };
                reader.readAsDataURL(imageInput.files[0]);
            } else {
                saveProduct();
            }

            function saveProduct() {
                const newId = products.length ? Math.max(...products.map(p => p.id)) + 1 : 1;
                const product = {
                    id: newId,
                    name,
                    price,
                    category,
                    description,
                    details,
                    image
                };
                products.push(product);
                if (window.localStorage) {
                    localStorage.setItem('products', JSON.stringify(products));
                }
                loadProductsTable();
                document.getElementById('addProductForm').reset();
                const modal = bootstrap.Modal.getOrCreateInstance(document.getElementById('addProductModal'));
                modal.hide();
                loadAdminData();
            }
        }

        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const modalHtml = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Chỉnh sửa sản phẩm</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="editProductForm">
                                <input type="hidden" id="editProductId" value="${product.id}">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="editProductName" class="form-label">Tên sản phẩm</label>
                                        <input type="text" class="form-control" id="editProductName" value="${product.name}" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="editProductPrice" class="form-label">Giá</label>
                                        <input type="number" class="form-control" id="editProductPrice" value="${product.price}" required>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="editProductCategory" class="form-label">Danh mục</label>
                                        <select class="form-select" id="editProductCategory" required>
                                            <option value="men" ${product.category === 'men' ? 'selected' : ''}>Thời trang nam</option>
                                            <option value="women" ${product.category === 'women' ? 'selected' : ''}>Thời trang nữ</option>
                                            <option value="accessories" ${product.category === 'accessories' ? 'selected' : ''}>Phụ kiện</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="editProductImage" class="form-label">Hình ảnh</label>
                                        <input type="file" class="form-control" id="editProductImage" accept="image/*">
                                        <img src="${product.image}" id="editProductPreview" class="img-thumbnail mt-2" width="80">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="editProductDescription" class="form-label">Mô tả ngắn</label>
                                    <textarea class="form-control" id="editProductDescription" rows="2" required>${product.description}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="editProductDetails" class="form-label">Chi tiết sản phẩm</label>
                                    <textarea class="form-control" id="editProductDetails" rows="4" required>${product.details}</textarea>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                            <button type="button" class="btn btn-primary" id="updateProductBtn">Cập nhật</button>
                        </div>
                    </div>
                </div>
            `;
            const modal = document.getElementById('editProductModal');
            modal.innerHTML = modalHtml;
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();

            document.getElementById('editProductImage').addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(ev) {
                        document.getElementById('editProductPreview').src = ev.target.result;
                    };
                    reader.readAsDataURL(this.files[0]);
                }
            });

            document.getElementById('updateProductBtn').onclick = function() {
                const id = parseInt(document.getElementById('editProductId').value, 10);
                const name = document.getElementById('editProductName').value.trim();
                const price = parseInt(document.getElementById('editProductPrice').value, 10);
                const category = document.getElementById('editProductCategory').value;
                const description = document.getElementById('editProductDescription').value.trim();
                const details = document.getElementById('editProductDetails').value.trim();
                const imageInput = document.getElementById('editProductImage');
                let image = document.getElementById('editProductPreview').src;

                function updateAndSave(img) {
                    const idx = products.findIndex(p => p.id === id);
                    if (idx !== -1) {
                        products[idx] = {
                            ...products[idx],
                            name,
                            price,
                            category,
                            description,
                            details,
                            image: img
                        };
                        if (window.localStorage) {
                            localStorage.setItem('products', JSON.stringify(products));
                        }
                        loadProductsTable();
                        bsModal.hide();
                        loadAdminData();
                    }
                }

                if (imageInput.files && imageInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        updateAndSave(e.target.result);
                    };
                    reader.readAsDataURL(imageInput.files[0]);
                } else {
                    updateAndSave(image);
                }
            };
        }

        function deleteProduct(productId) {
            const idx = products.findIndex(p => p.id === productId);
            if (idx !== -1) {
                products.splice(idx, 1);
                if (window.localStorage) {
                    localStorage.setItem('products', JSON.stringify(products));
                }
                loadProductsTable();
                loadAdminData();
            }
        }
        
        function viewOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const productsHtml = order.products.map(p => `
                <tr>
                    <td>${p.name}</td>
                    <td>${formatPrice(p.price)} đ</td>
                    <td>${p.quantity}</td>
                    <td>${formatPrice(p.price * p.quantity)} đ</td>
                </tr>
            `).join('');
            
            let statusBadge;
            switch(order.status) {
                case 'pending':
                    statusBadge = '<span class="badge bg-warning">Chờ xử lý</span>';
                    break;
                case 'processing':
                    statusBadge = '<span class="badge bg-info">Đang xử lý</span>';
                    break;
                case 'shipped':
                    statusBadge = '<span class="badge bg-primary">Đã giao hàng</span>';
                    break;
                case 'completed':
                    statusBadge = '<span class="badge bg-success">Hoàn thành</span>';
                    break;
                case 'cancelled':
                    statusBadge = '<span class="badge bg-danger">Đã hủy</span>';
                    break;
                default:
                    statusBadge = '<span class="badge bg-secondary">Khác</span>';
            }
            
            let shippingStatus;
            switch(order.shipping.status) {
                case 'pending':
                    shippingStatus = '<span class="badge bg-warning">Chờ giao</span>';
                    break;
                case 'shipping':
                    shippingStatus = '<span class="badge bg-info">Đang giao</span>';
                    break;
                case 'delivered':
                    shippingStatus = '<span class="badge bg-success">Đã giao</span>';
                    break;
                case 'returned':
                    shippingStatus = '<span class="badge bg-danger">Hoàn hàng</span>';
                    break;
                default:
                    shippingStatus = '<span class="badge bg-secondary">Khác</span>';
            }
            
            const modalHtml = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Chi tiết đơn hàng #${order.id}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <h6>Thông tin khách hàng</h6>
                                    <p><strong>Tên:</strong> ${order.customer}</p>
                                    <p><strong>Email:</strong> ${order.email}</p>
                                    <p><strong>SĐT:</strong> ${order.phone}</p>
                                </div>
                                <div class="col-md-6">
                                    <h6>Thông tin đơn hàng</h6>
                                    <p><strong>Ngày đặt:</strong> ${order.date}</p>
                                    <p><strong>Trạng thái:</strong> ${statusBadge}</p>
                                    <p><strong>Thanh toán:</strong> ${order.payment}</p>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <h6>Địa chỉ giao hàng</h6>
                                <p>${order.shipping.address}</p>
                                <p><strong>Phí vận chuyển:</strong> ${formatPrice(order.shipping.fee)} đ</p>
                                <p><strong>Trạng thái vận chuyển:</strong> ${shippingStatus}</p>
                                ${order.shipping.trackingNumber ? 
                                    `<p><strong>Mã vận đơn:</strong> ${order.shipping.trackingNumber} (${order.shipping.carrier})</p>` : ''}
                            </div>
                            
                            <div class="table-responsive mb-4">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Sản phẩm</th>
                                            <th>Đơn giá</th>
                                            <th>Số lượng</th>
                                            <th>Thành tiền</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${productsHtml}
                                        <tr>
                                            <td colspan="3" class="text-end"><strong>Phí vận chuyển:</strong></td>
                                            <td>${formatPrice(order.shipping.fee)} đ</td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" class="text-end"><strong>Tổng cộng:</strong></td>
                                            <td>${formatPrice(order.total + order.shipping.fee)} đ</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="mb-3">
                                <label for="order-notes" class="form-label">Ghi chú đơn hàng</label>
                                <textarea class="form-control" id="order-notes" rows="3"></textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                            <button type="button" class="btn btn-primary">Lưu thay đổi</button>
                        </div>
                    </div>
                </div>
            `;
            
            const modal = document.getElementById('orderDetailsModal');
            modal.innerHTML = modalHtml;
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();
        }

        function cancelOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                order.status = 'cancelled';
                order.shipping.status = 'cancelled';
                loadOrdersTable();
                loadShippingData();
                alert(`Đã hủy đơn hàng ${orderId}`);
            }
        }

        function updateShippingStatus(orderId, action) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            switch(action) {
                case 'process':
                    order.status = 'processing';
                    order.shipping.status = 'pending';
                    break;
                case 'ship':
                    order.status = 'processing';
                    order.shipping.status = 'shipping';
                    break;
                case 'complete':
                    order.status = 'completed';
                    order.shipping.status = 'delivered';
                    break;
                case 'return':
                    order.status = 'cancelled';
                    order.shipping.status = 'returned';
                    break;
            }
            
            loadOrdersTable();
            loadShippingData();
            alert(`Đã cập nhật trạng thái đơn hàng ${orderId} thành công`);
        }
        
        // Các hàm quản lý giao dịch
        function addTransaction() {
            const type = document.getElementById('transaction-type').value;
            const amount = parseInt(document.getElementById('transaction-amount').value);
            const note = document.getElementById('transaction-note').value;
            
            if (!amount || amount <= 0) {
                alert('Vui lòng nhập số tiền hợp lệ');
                return;
            }
            
            const newId = 'GD' + (transactions.length + 1).toString().padStart(3, '0');
            const currentUser = getCurrentUser();
            
            transactions.push({
                id: newId,
                date: new Date().toISOString().split('T')[0],
                type,
                amount,
                user: currentUser ? currentUser.name : 'System',
                note
            });
            
            loadFundsData();
            document.getElementById('addTransactionForm').reset();
            const modal = bootstrap.Modal.getOrCreateInstance(document.getElementById('addTransactionModal'));
            modal.hide();
            alert('Đã thêm giao dịch thành công');
        }

        function deleteTransaction(transactionId) {
            const index = transactions.findIndex(t => t.id === transactionId);
            if (index !== -1) {
                transactions.splice(index, 1);
                loadFundsData();
                alert('Đã xóa giao dịch thành công');
            }
        }
        
        function addPromotion() {
            const code = document.getElementById('promotion-code').value.trim().toUpperCase();
            const name = document.getElementById('promotion-name').value.trim();
            const type = document.getElementById('promotion-type').value;
            const value = parseInt(document.getElementById('promotion-value').value);
            const startDate = document.getElementById('promotion-start-date').value;
            const endDate = document.getElementById('promotion-end-date').value;
            const description = document.getElementById('promotion-description').value.trim();
            const usageLimit = parseInt(document.getElementById('promotion-usage-limit').value) || 0;
            
            if (!code || !name || !value || !startDate || !endDate) {
                alert('Vui lòng điền đầy đủ thông tin');
                return;
            }
            
            if (promotions.some(p => p.code === code)) {
                alert('Mã khuyến mại đã tồn tại');
                return;
            }
            
            if (new Date(startDate) > new Date(endDate)) {
                alert('Ngày kết thúc phải sau ngày bắt đầu');
                return;
            }
            
            promotions.push({
                code,
                name,
                type,
                value,
                startDate,
                endDate,
                description,
                usageLimit,
                usedCount: 0,
                status: new Date() >= new Date(startDate) ? 'active' : 'upcoming'
            });
            
            loadPromotionsData();
            document.getElementById('addPromotionForm').reset();
            const modal = bootstrap.Modal.getOrCreateInstance(document.getElementById('addPromotionModal'));
            modal.hide();
            alert('Đã thêm khuyến mại thành công');
        }

        function editPromotion(promoCode) {
            const promo = promotions.find(p => p.code === promoCode);
            if (!promo) return;
            
            const modalHtml = `
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Chỉnh sửa khuyến mại</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="editPromotionForm">
                                <input type="hidden" id="editPromotionCode" value="${promo.code}">
                                <div class="mb-3">
                                    <label for="editPromotionName" class="form-label">Tên chương trình</label>
                                    <input type="text" class="form-control" id="editPromotionName" value="${promo.name}" required>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="editPromotionType" class="form-label">Loại giảm giá</label>
                                        <select class="form-select" id="editPromotionType" required>
                                            <option value="fixed" ${promo.type === 'fixed' ? 'selected' : ''}>Giảm giá cố định</option>
                                            <option value="percent" ${promo.type === 'percent' ? 'selected' : ''}>Giảm giá phần trăm</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="editPromotionValue" class="form-label">Giá trị</label>
                                        <input type="number" class="form-control" id="editPromotionValue" value="${promo.value}" required>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="editPromotionStartDate" class="form-label">Ngày bắt đầu</label>
                                        <input type="date" class="form-control" id="editPromotionStartDate" value="${promo.startDate}" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="editPromotionEndDate" class="form-label">Ngày kết thúc</label>
                                        <input type="date" class="form-control" id="editPromotionEndDate" value="${promo.endDate}" required>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="editPromotionDescription" class="form-label">Mô tả</label>
                                    <textarea class="form-control" id="editPromotionDescription" rows="3">${promo.description || ''}</textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="editPromotionUsageLimit" class="form-label">Giới hạn sử dụng (0 = không giới hạn)</label>
                                    <input type="number" class="form-control" id="editPromotionUsageLimit" value="${promo.usageLimit}" min="0">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                            <button type="button" class="btn btn-primary" id="updatePromotionBtn">Cập nhật</button>
                        </div>
                    </div>
                </div>
            `;
            
            const modal = document.getElementById('editPromotionModal');
            modal.innerHTML = modalHtml;
            const bsModal = new bootstrap.Modal(modal);
            bsModal.show();

            document.getElementById('updatePromotionBtn').onclick = function() {
                const name = document.getElementById('editPromotionName').value.trim();
                const type = document.getElementById('editPromotionType').value;
                const value = parseInt(document.getElementById('editPromotionValue').value);
                const startDate = document.getElementById('editPromotionStartDate').value;
                const endDate = document.getElementById('editPromotionEndDate').value;
                const description = document.getElementById('editPromotionDescription').value.trim();
                const usageLimit = parseInt(document.getElementById('editPromotionUsageLimit').value) || 0;
                
                if (!name || !value || !startDate || !endDate) {
                    alert('Vui lòng điền đầy đủ thông tin');
                    return;
                }
                
                if (new Date(startDate) > new Date(endDate)) {
                    alert('Ngày kết thúc phải sau ngày bắt đầu');
                    return;
                }
                
                const idx = promotions.findIndex(p => p.code === promoCode);
                if (idx !== -1) {
                    promotions[idx] = {
                        ...promotions[idx],
                        name,
                        type,
                        value,
                        startDate,
                        endDate,
                        description,
                        usageLimit,
                        status: new Date() >= new Date(startDate) ? 'active' : 'upcoming'
                    };
                    
                    loadPromotionsData();
                    bsModal.hide();
                    alert('Đã cập nhật khuyến mại thành công');
                }
            };
        }

        function deletePromotion(promoCode) {
            const index = promotions.findIndex(p => p.code === promoCode);
            if (index !== -1) {
                promotions.splice(index, 1);
                loadPromotionsData();
                alert('Đã xóa khuyến mại thành công');
            }
        }
        
        function drawOrdersChart() {
            const ctx = document.getElementById('ordersChart').getContext('2d');
            
            const months = ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6'];
            const ordersData = [120, 190, 150, 210, 180, 250];
            const revenueData = [5000000, 7500000, 6000000, 8500000, 7000000, 9500000];
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Số đơn hàng',
                            data: ordersData,
                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Doanh thu (triệu)',
                            data: revenueData.map(v => v / 1000000),
                            backgroundColor: 'rgba(75, 192, 192, 0.5)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1,
                            type: 'line',
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Số đơn hàng'
                            }
                        },
                        y1: {
                            position: 'right',
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Doanh thu (triệu VNĐ)'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }

        function drawTopProductsChart() {
            const ctx = document.getElementById('topProductsChart');
            if (!ctx) return;

        if (ctx.chart) {
            ctx.chart.destroy();
        }

        const topProducts = [
            { name: 'Áo khoác denim nam', sold: 120 },
            { name: 'Váy hoa nữ cổ điển', sold: 95 },
            { name: 'Quần jeans nam rách gối', sold: 85 }
        ];

        ctx.chart = new Chart(ctx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: topProducts.map(p => p.name),
                datasets: [{
                    label: 'Số lượng bán',
                    data: topProducts.map(p => p.sold),
                    backgroundColor: 'rgba(54, 162, 235, 0.7)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
            }]
        },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

        function drawRevenueChart() {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            
            const months = ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6'];
            const revenueData = [5000000, 7500000, 6000000, 8500000, 7000000, 9500000];
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Doanh thu',
                        data: revenueData,
                        backgroundColor: 'rgba(54, 162, 235, 0.7)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return (value / 1000000) + ' triệu';
                                }
                            }
                        }
                    }
                }
            });
        }

        function drawConversionChart() {
            const ctx = document.getElementById('conversionChart').getContext('2d');
            
            const labels = ['Tuần 1', 'Tuần 2', 'Tuần 3', 'Tuần 4'];
            const conversionRates = [2.5, 3.1, 2.8, 3.5];
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Tỉ lệ chuyển đổi (%)',
                        data: conversionRates,
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 2,
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 5
                        }
                    }
                }
            });
        }

        function drawExpensesChart() {
            const ctx = document.getElementById('expensesChart').getContext('2d');
            
            const months = ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6'];
            const expensesData = [2000000, 2500000, 3000000, 2800000, 3200000, 3500000];
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Chi tiêu',
                        data: expensesData,
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 2,
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return (value / 1000000) + ' triệu';
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>